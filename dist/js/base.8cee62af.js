(window.webpackJsonp=window.webpackJsonp||[]).push([["base"],{1325:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return r})),i.d(e,"c",(function(){return c}));var n=i("a142"),o=!1;if(!n.f)try{var a={};Object.defineProperty(a,"passive",{get:function(){o=!0}}),window.addEventListener("test-passive",null,a)}catch(t){}function s(t,e,i,a){void 0===a&&(a=!1),n.f||t.addEventListener(e,i,!!o&&{capture:!1,passive:a})}function r(t,e,i){n.f||t.removeEventListener(e,i)}function c(t,e){("boolean"!=typeof t.cancelable||t.cancelable)&&t.preventDefault(),e&&function(t){t.stopPropagation()}(t)}},3337:function(t,e,i){"use strict";i.d(e,"e",(function(){return s})),i.d(e,"d",(function(){return r})),i.d(e,"b",(function(){return o})),i.d(e,"a",(function(){return n})),i.d(e,"c",(function(){return a}));var n={topic:4,year:3,month:2,time:1},o=[{name:"型号",key:"Model"},{name:"焦距",key:"FocalLength"},{name:"参数",val:"${FNumber}, ${ExposureTime}s, IOS${ISOSpeedRatings}"},{name:"时间",key:"DateTime"}],a={},s=(window.screen.width/3).toFixed(0),r=(window.screen.width/2).toFixed(0)},3875:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("1325"),o={data:function(){return{direction:""}},methods:{touchStart:function(t){this.resetTouchStatus(),this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY},touchMove:function(t){var e,i,n=t.touches[0];this.deltaX=n.clientX-this.startX,this.deltaY=n.clientY-this.startY,this.offsetX=Math.abs(this.deltaX),this.offsetY=Math.abs(this.deltaY),this.direction=this.direction||(e=this.offsetX,i=this.offsetY,e>i&&e>10?"horizontal":i>e&&i>10?"vertical":"")},resetTouchStatus:function(){this.direction="",this.deltaX=0,this.deltaY=0,this.offsetX=0,this.offsetY=0},bindTouchEvent:function(t){var e=this.onTouchStart,i=this.onTouchMove,o=this.onTouchEnd;Object(n.b)(t,"touchstart",e),Object(n.b)(t,"touchmove",i),o&&(Object(n.b)(t,"touchend",o),Object(n.b)(t,"touchcancel",o))}}}},"3e3f":function(t,e,i){},"3f92":function(t,e,i){},4598:function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return c}));var n=i("a142"),o=Date.now(),a=n.f?t:window,s=a.requestAnimationFrame||function(t){var e=Date.now(),i=Math.max(0,16-(e-o)),n=setTimeout(t,i);return o=e+i,n};function r(t){return s.call(a,t)}function c(t){r((function(){r(t)}))}a.cancelAnimationFrame||a.clearTimeout}).call(this,i("c8ba"))},"4d75":function(t,e,i){},"504b":function(t,e,i){},"5fbe":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("1325"),o=0;function a(t){var e="binded_"+o++;function i(){this[e]||(t.call(this,n.b,!0),this[e]=!0)}function a(){this[e]&&(t.call(this,n.a,!1),this[e]=!1)}return{mounted:i,activated:i,deactivated:a,beforeDestroy:a}}},6605:function(t,e,i){"use strict";i.d(e,"a",(function(){return j}));var n={zIndex:2e3,lockCount:0,stack:[],find:function(t){return this.stack.filter((function(e){return e.vm===t}))[0]}},o=i("c31d"),a=i("2638"),s=i.n(a),r=i("d282"),c=i("a142"),h=i("ba31"),u=i("1325"),l=Object(r.a)("overlay"),d=l[0],f=l[1];function v(t){Object(u.c)(t,!0)}function m(t,e,i,n){var a=Object(o.a)({zIndex:e.zIndex},e.customStyle);return Object(c.c)(e.duration)&&(a.animationDuration=e.duration+"s"),t("transition",{attrs:{name:"van-fade"}},[t("div",s()([{directives:[{name:"show",value:e.show}],style:a,class:[f(),e.className],on:{touchmove:e.lockScroll?v:c.g}},Object(h.a)(n,!0)]),[null==i.default?void 0:i.default()])])}m.props={show:Boolean,zIndex:[Number,String],duration:[Number,String],className:null,customStyle:Object,lockScroll:{type:Boolean,default:!0}};var p=d(m);function g(t){var e=t.parentNode;e&&e.removeChild(t)}var w={className:"",customStyle:{}};function y(t){var e=n.find(t);if(e){var i=t.$el,a=e.config,s=e.overlay;i&&i.parentNode&&i.parentNode.insertBefore(s.$el,i),Object(o.a)(s,w,a,{show:!0})}}function b(t,e){var i=n.find(t);if(i)i.config=e;else{var o=function(t){return Object(h.b)(p,{on:{click:function(){t.$emit("click-overlay"),t.closeOnClickOverlay&&(t.onClickOverlay?t.onClickOverlay():t.close())}}})}(t);n.stack.push({vm:t,config:e,overlay:o})}y(t)}function S(t){var e=n.find(t);e&&(e.overlay.show=!1)}var x=/scroll|auto/i,k=i("3875");function O(t){var e=t.ref,i=t.afterPortal;return{props:{getContainer:[String,Function]},watch:{getContainer:"portal"},mounted:function(){this.getContainer&&this.portal()},methods:{portal:function(){var t,n,o=this.getContainer,a=e?this.$refs[e]:this.$el;o?t="string"==typeof(n=o)?document.querySelector(n):n():this.$parent&&(t=this.$parent.$el),t&&t!==a.parentNode&&t.appendChild(a),i&&i.call(this)}}}}var C=i("5fbe"),T={mixins:[Object(C.a)((function(t,e){this.handlePopstate(e&&this.closeOnPopstate)}))],props:{closeOnPopstate:Boolean},data:function(){return{bindStatus:!1}},watch:{closeOnPopstate:function(t){this.handlePopstate(t)}},methods:{handlePopstate:function(t){var e=this;this.$isServer||this.bindStatus!==t&&(this.bindStatus=t,(t?u.b:u.a)(window,"popstate",(function(){e.close(),e.shouldReopen=!1})))}}},$={value:Boolean,overlay:Boolean,overlayStyle:Object,overlayClass:String,closeOnClickOverlay:Boolean,zIndex:[Number,String],lockScroll:{type:Boolean,default:!0},lazyRender:{type:Boolean,default:!0}};function j(t){return void 0===t&&(t={}),{mixins:[k.a,T,O({afterPortal:function(){this.overlay&&y()}})],props:$,data:function(){return{inited:this.value}},computed:{shouldRender:function(){return this.inited||!this.lazyRender}},watch:{value:function(e){var i=e?"open":"close";this.inited=this.inited||this.value,this[i](),t.skipToggleEvent||this.$emit(i)},overlay:"renderOverlay"},mounted:function(){this.value&&this.open()},activated:function(){this.shouldReopen&&(this.$emit("input",!0),this.shouldReopen=!1)},beforeDestroy:function(){var t,e;t=this,(e=n.find(t))&&g(e.overlay.$el),this.opened&&this.removeLock(),this.getContainer&&g(this.$el)},deactivated:function(){this.value&&(this.close(),this.shouldReopen=!0)},methods:{open:function(){this.$isServer||this.opened||(void 0!==this.zIndex&&(n.zIndex=this.zIndex),this.opened=!0,this.renderOverlay(),this.addLock())},addLock:function(){this.lockScroll&&(Object(u.b)(document,"touchstart",this.touchStart),Object(u.b)(document,"touchmove",this.onTouchMove),n.lockCount||document.body.classList.add("van-overflow-hidden"),n.lockCount++)},removeLock:function(){this.lockScroll&&n.lockCount&&(n.lockCount--,Object(u.a)(document,"touchstart",this.touchStart),Object(u.a)(document,"touchmove",this.onTouchMove),n.lockCount||document.body.classList.remove("van-overflow-hidden"))},close:function(){this.opened&&(S(this),this.opened=!1,this.removeLock(),this.$emit("input",!1))},onTouchMove:function(t){this.touchMove(t);var e=this.deltaY>0?"10":"01",i=function(t,e){void 0===e&&(e=window);for(var i=t;i&&"HTML"!==i.tagName&&1===i.nodeType&&i!==e;){var n=window.getComputedStyle(i).overflowY;if(x.test(n)){if("BODY"!==i.tagName)return i;var o=window.getComputedStyle(i.parentNode).overflowY;if(x.test(o))return i}i=i.parentNode}return e}(t.target,this.$el),n=i.scrollHeight,o=i.offsetHeight,a=i.scrollTop,s="11";0===a?s=o>=n?"00":"01":a+o>=n&&(s="10"),"11"===s||"vertical"!==this.direction||parseInt(s,2)&parseInt(e,2)||Object(u.c)(t,!0)},renderOverlay:function(){var t=this;!this.$isServer&&this.value&&this.$nextTick((function(){t.updateZIndex(t.overlay?1:0),t.overlay?b(t,{zIndex:n.zIndex++,duration:t.duration,className:t.overlayClass,customStyle:t.overlayStyle}):S(t)}))},updateZIndex:function(t){void 0===t&&(t=0),this.$el.style.zIndex=++n.zIndex+t}}}}},"786d":function(t,e,i){},"7c7f":function(t,e,i){},"7f7d":function(t,e,i){},8270:function(t,e,i){},8508:function(t,e,i){t.exports=i.p+"img/take_photo.78d7d780.png"},"8fc1":function(t,e,i){"use strict";var n=i("3e3f");i.n(n).a},a71a:function(t,e,i){},c8ba:function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},d45f:function(t,e,i){"use strict";var n=i("7f7d");i.n(n).a},d504:function(t,e,i){"use strict";i.r(e),i("ac4d"),i("8a81"),i("5df3"),i("1c4c"),i("2397");var n=i("bd86"),o=(i("68ef"),i("7c7f"),i("2638")),a=i.n(o),s=i("d282"),r=i("ba31"),c=Object(s.a)("divider"),h=c[0],u=c[1];function l(t,e,i,n){var o;return t("div",a()([{attrs:{role:"separator"},style:{borderColor:e.borderColor},class:u((o={dashed:e.dashed,hairline:e.hairline},o["content-"+e.contentPosition]=i.default,o))},Object(r.a)(n,!0)]),[i.default&&i.default()])}l.props={dashed:Boolean,hairline:{type:Boolean,default:!0},contentPosition:{type:String,default:"center"}};var d=h(l),f=(i("a71a"),i("9d70"),i("3743"),i("09fe"),i("4d75"),i("e3b3"),i("8270"),i("786d"),i("504b"),i("c31d")),v=i("8bbf"),m=i.n(v),p=i("a142"),g=Object(s.a)("image-preview"),w=g[0],y=g[1],b=i("6605"),S=i("3875"),x=i("5fbe"),k=i("ad06"),O=i("1325"),C=i("4598");function T(t,e,i){return Math.min(Math.max(t,e),i)}var $,j=Object(s.a)("swipe"),I=j[0],M=j[1],z=I({mixins:[S.a,($="vanSwipe",{provide:function(){var t;return(t={})[$]=this,t},data:function(){return{children:[]}}}),Object(x.a)((function(t,e){t(window,"resize",this.resize,!0),t(window,"visibilitychange",this.onVisibilityChange),e?this.initialize():this.clear()}))],props:{width:[Number,String],height:[Number,String],autoplay:[Number,String],vertical:Boolean,lazyRender:Boolean,indicatorColor:String,loop:{type:Boolean,default:!0},duration:{type:[Number,String],default:500},touchable:{type:Boolean,default:!0},initialSwipe:{type:[Number,String],default:0},showIndicators:{type:Boolean,default:!0},stopPropagation:{type:Boolean,default:!0}},data:function(){return{rect:null,offset:0,active:0,deltaX:0,deltaY:0,swiping:!1,computedWidth:0,computedHeight:0}},watch:{children:function(){this.initialize()},initialSwipe:function(){this.initialize()},autoplay:function(t){t>0?this.autoPlay():this.clear()}},computed:{count:function(){return this.children.length},maxCount:function(){return Math.ceil(Math.abs(this.minOffset)/this.size)},delta:function(){return this.vertical?this.deltaY:this.deltaX},size:function(){return this[this.vertical?"computedHeight":"computedWidth"]},trackSize:function(){return this.count*this.size},activeIndicator:function(){return(this.active+this.count)%this.count},isCorrectDirection:function(){var t=this.vertical?"vertical":"horizontal";return this.direction===t},trackStyle:function(){var t,e=this.vertical?"height":"width",i=this.vertical?"width":"height";return(t={})[e]=this.trackSize+"px",t[i]=this[i]?this[i]+"px":"",t.transitionDuration=(this.swiping?0:this.duration)+"ms",t.transform="translate"+(this.vertical?"Y":"X")+"("+this.offset+"px)",t},indicatorStyle:function(){return{backgroundColor:this.indicatorColor}},minOffset:function(){return(this.vertical?this.rect.height:this.rect.width)-this.size*this.count}},mounted:function(){this.bindTouchEvent(this.$refs.track)},methods:{initialize:function(t){if(void 0===t&&(t=+this.initialSwipe),this.$el&&(e=this.$el,i=window.getComputedStyle(e),n="none"===i.display,o=null===e.offsetParent&&"fixed"!==i.position,!n&&!o)){var e,i,n,o;clearTimeout(this.timer);var a=this.$el.getBoundingClientRect();this.rect=a,this.swiping=!0,this.active=t,this.computedWidth=Math.round(+this.width||a.width),this.computedHeight=Math.round(+this.height||a.height),this.offset=this.getTargetOffset(t),this.children.forEach((function(t){t.offset=0})),this.autoPlay()}},resize:function(){this.initialize(this.activeIndicator)},onVisibilityChange:function(){document.hidden?this.clear():this.autoPlay()},onTouchStart:function(t){this.touchable&&(this.clear(),this.touchStartTime=Date.now(),this.touchStart(t),this.correctPosition())},onTouchMove:function(t){this.touchable&&this.swiping&&(this.touchMove(t),this.isCorrectDirection&&(Object(O.c)(t,this.stopPropagation),this.move({offset:this.delta})))},onTouchEnd:function(){if(this.touchable&&this.swiping){var t=this.size,e=this.delta,i=e/(Date.now()-this.touchStartTime);if((Math.abs(i)>.25||Math.abs(e)>t/2)&&this.isCorrectDirection){var n=this.vertical?this.offsetY:this.offsetX,o=0;o=this.loop?n>0?e>0?-1:1:0:-Math[e>0?"ceil":"floor"](e/t),this.move({pace:o,emitChange:!0})}else e&&this.move({pace:0});this.swiping=!1,this.autoPlay()}},getTargetActive:function(t){var e=this.active,i=this.count,n=this.maxCount;return t?this.loop?T(e+t,-1,i):T(e+t,0,n):e},getTargetOffset:function(t,e){void 0===e&&(e=0);var i=t*this.size;this.loop||(i=Math.min(i,-this.minOffset));var n=Math.round(e-i);return this.loop||(n=T(n,this.minOffset,0)),n},move:function(t){var e=t.pace,i=void 0===e?0:e,n=t.offset,o=void 0===n?0:n,a=t.emitChange,s=this.loop,r=this.count,c=this.active,h=this.children,u=this.trackSize,l=this.minOffset;if(!(r<=1)){var d=this.getTargetActive(i),f=this.getTargetOffset(d,o);if(s){if(h[0]&&f!==l){var v=f<l;h[0].offset=v?u:0}if(h[r-1]&&0!==f){var m=f>0;h[r-1].offset=m?-u:0}}this.active=d,this.offset=f,a&&d!==c&&this.$emit("change",this.activeIndicator)}},prev:function(){var t=this;this.correctPosition(),this.resetTouchStatus(),Object(C.a)((function(){t.swiping=!1,t.move({pace:-1,emitChange:!0})}))},next:function(){var t=this;this.correctPosition(),this.resetTouchStatus(),Object(C.a)((function(){t.swiping=!1,t.move({pace:1,emitChange:!0})}))},swipeTo:function(t,e){var i=this;void 0===e&&(e={}),this.correctPosition(),this.resetTouchStatus(),Object(C.a)((function(){var n;n=i.loop&&t===i.count?0===i.active?0:t:t%i.count,e.immediate?Object(C.a)((function(){i.swiping=!1})):i.swiping=!1,i.move({pace:n-i.active,emitChange:!0})}))},correctPosition:function(){this.swiping=!0,this.active<=-1&&this.move({pace:this.count}),this.active>=this.count&&this.move({pace:-this.count})},clear:function(){clearTimeout(this.timer)},autoPlay:function(){var t=this,e=this.autoplay;e>0&&this.count>1&&(this.clear(),this.timer=setTimeout((function(){t.next(),t.autoPlay()}),e))},genIndicator:function(){var t=this,e=this.$createElement,i=this.count,n=this.activeIndicator,o=this.slots("indicator");return o||(this.showIndicators&&i>1?e("div",{class:M("indicators",{vertical:this.vertical})},[Array.apply(void 0,Array(i)).map((function(i,o){return e("i",{class:M("indicator",{active:o===n}),style:o===n?t.indicatorStyle:null})}))]):void 0)}},render:function(){var t=arguments[0];return t("div",{class:M()},[t("div",{ref:"track",style:this.trackStyle,class:M("track",{vertical:this.vertical})},[this.slots()]),this.genIndicator()])}}),R=i("44bf"),Y=i("543e"),_=Object(s.a)("swipe-item"),P=_[0],L=_[1],X=P({mixins:[function(t,e){var i,n;void 0===e&&(e={});var o=e.indexKey||"index";return{inject:(i={},i[t]={default:null},i),computed:(n={parent:function(){return this.disableBindRelation?null:this[t]}},n[o]=function(){return this.bindRelation(),this.parent?this.parent.children.indexOf(this):null},n),watch:{disableBindRelation:function(t){t||this.bindRelation()}},mounted:function(){this.bindRelation()},beforeDestroy:function(){var t=this;this.parent&&(this.parent.children=this.parent.children.filter((function(e){return e!==t})))},methods:{bindRelation:function(){if(this.parent&&-1===this.parent.children.indexOf(this)){var t=[].concat(this.parent.children,[this]);!function(t,e){var i=e.$vnode.componentOptions;if(i&&i.children){var n=function(t){var e=[];return function t(i){i.forEach((function(i){e.push(i),i.componentInstance&&t(i.componentInstance.$children.map((function(t){return t.$vnode}))),i.children&&t(i.children)}))}(t),e}(i.children);t.sort((function(t,e){return n.indexOf(t.$vnode)-n.indexOf(e.$vnode)}))}}(t,this.parent),this.parent.children=t}}}}}("vanSwipe")],data:function(){return{offset:0,mounted:!1}},mounted:function(){var t=this;this.$nextTick((function(){t.mounted=!0}))},computed:{style:function(){var t={},e=this.parent,i=e.size,n=e.vertical;return t[n?"height":"width"]=i+"px",this.offset&&(t.transform="translate"+(n?"Y":"X")+"("+this.offset+"px)"),t},shouldRender:function(){var t=this.index,e=this.parent,i=this.mounted;if(!e.lazyRender)return!0;if(!i)return!1;var n=e.activeIndicator,o=e.count-1;return t===n||t===(0===n?o:n-1)||t===(n===o?0:n+1)}},render:function(){var t=arguments[0];return t("div",{class:L(),style:this.style,on:Object(f.a)({},this.$listeners)},[this.shouldRender&&this.slots()])}});function N(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}var D,B={mixins:[S.a],props:{src:String,show:Boolean,active:Number,minZoom:[Number,String],maxZoom:[Number,String],windowWidth:Number,windowHeight:Number},data:function(){return{scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}},computed:{vertical:function(){var t=this.windowWidth,e=this.windowHeight/t;return this.imageRatio>e},imageStyle:function(){var t=this.scale,e={transitionDuration:this.zooming||this.moving?"0s":".3s"};if(1!==t){var i=this.moveX/t,n=this.moveY/t;e.transform="scale("+t+", "+t+") translate("+i+"px, "+n+"px)"}return e},maxMoveX:function(){if(this.imageRatio){var t=this.vertical?this.windowHeight/this.imageRatio:this.windowWidth;return Math.max(0,(this.scale*t-this.windowWidth)/2)}return 0},maxMoveY:function(){if(this.imageRatio){var t=this.vertical?this.windowHeight:this.windowWidth*this.imageRatio;return Math.max(0,(this.scale*t-this.windowHeight)/2)}return 0}},watch:{show:function(t){t||this.resetScale()}},mounted:function(){this.bindTouchEvent(this.$el)},methods:{resetScale:function(){this.setScale(1),this.moveX=0,this.moveY=0},setScale:function(t){this.scale=T(t,+this.minZoom,+this.maxZoom),this.$emit("scale",{scale:this.scale,index:this.active})},toggleScale:function(){var t=this.scale>1?1:2;this.setScale(t),this.moveX=0,this.moveY=0},onTouchStart:function(t){var e=t.touches,i=this.offsetX,n=void 0===i?0:i;this.touchStart(t),this.touchStartTime=new Date,this.startMoveX=this.moveX,this.startMoveY=this.moveY,this.moving=1===e.length&&1!==this.scale,this.zooming=2===e.length&&!n,this.zooming&&(this.startScale=this.scale,this.startDistance=N(t.touches))},onTouchMove:function(t){var e=t.touches;if(this.touchMove(t),(this.moving||this.zooming)&&Object(O.c)(t,!0),this.moving){var i=this.deltaX+this.startMoveX,n=this.deltaY+this.startMoveY;this.moveX=T(i,-this.maxMoveX,this.maxMoveX),this.moveY=T(n,-this.maxMoveY,this.maxMoveY)}if(this.zooming&&2===e.length){var o=N(e),a=this.startScale*o/this.startDistance;this.setScale(a)}},onTouchEnd:function(t){var e=!1;(this.moving||this.zooming)&&(e=!0,this.moving&&this.startMoveX===this.moveX&&this.startMoveY===this.moveY&&(e=!1),t.touches.length||(this.zooming&&(this.moveX=T(this.moveX,-this.maxMoveX,this.maxMoveX),this.moveY=T(this.moveY,-this.maxMoveY,this.maxMoveY),this.zooming=!1),this.moving=!1,this.startMoveX=0,this.startMoveY=0,this.startScale=1,this.scale<1&&this.resetScale())),Object(O.c)(t,e),this.checkTap(),this.resetTouchStatus()},checkTap:function(){var t=this,e=this.offsetX,i=void 0===e?0:e,n=this.offsetY,o=void 0===n?0:n,a=new Date-this.touchStartTime;i<10&&o<10&&a<250&&(this.doubleTapTimer?(clearTimeout(this.doubleTapTimer),this.doubleTapTimer=null,this.toggleScale()):this.doubleTapTimer=setTimeout((function(){t.$emit("close"),t.doubleTapTimer=null}),250))},onLoad:function(t){var e=t.target,i=e.naturalWidth,n=e.naturalHeight;this.imageRatio=n/i}},render:function(){var t=arguments[0],e={loading:function(){return t(Y.a,{attrs:{type:"spinner"}})}};return t(X,{class:y("swipe-item")},[t(R.a,{attrs:{src:this.src,fit:"contain"},class:y("image",{vertical:this.vertical}),style:this.imageStyle,scopedSlots:e,on:{load:this.onLoad}})])}},E=w({mixins:[S.a,Object(b.a)({skipToggleEvent:!0}),Object(x.a)((function(t){t(window,"resize",this.resize,!0)}))],props:{className:null,closeable:Boolean,asyncClose:Boolean,showIndicators:Boolean,images:{type:Array,default:function(){return[]}},loop:{type:Boolean,default:!0},swipeDuration:{type:[Number,String],default:500},overlay:{type:Boolean,default:!0},showIndex:{type:Boolean,default:!0},startPosition:{type:[Number,String],default:0},minZoom:{type:[Number,String],default:1/3},maxZoom:{type:[Number,String],default:3},overlayClass:{type:String,default:y("overlay")},closeIcon:{type:String,default:"clear"},closeIconPosition:{type:String,default:"top-right"}},data:function(){return{active:0,windowWidth:0,windowHeight:0,doubleClickTimer:null}},created:function(){this.resize()},watch:{startPosition:"setActive",value:function(t){var e=this;t?(this.setActive(+this.startPosition),this.$nextTick((function(){e.$refs.swipe.swipeTo(+e.startPosition,{immediate:!0})}))):this.$emit("close",{index:this.active,url:this.images[this.active]})}},methods:{resize:function(){p.b&&(this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight)},emitClose:function(){this.asyncClose||this.$emit("input",!1)},emitScale:function(t){this.$emit("scale",t)},setActive:function(t){t!==this.active&&(this.active=t,this.$emit("change",t))},genIndex:function(){var t=this.$createElement;if(this.showIndex)return t("div",{class:y("index")},[this.slots("index")||this.active+1+" / "+this.images.length])},genCover:function(){var t=this.$createElement,e=this.slots("cover");if(e)return t("div",{class:y("cover")},[e])},genImages:function(){var t=this,e=this.$createElement;return e(z,{ref:"swipe",attrs:{lazyRender:!0,loop:this.loop,duration:this.swipeDuration,initialSwipe:this.startPosition,showIndicators:this.showIndicators,indicatorColor:"white"},class:y("swipe"),on:{change:this.setActive}},[this.images.map((function(i){return e(B,{attrs:{src:i,show:t.value,active:t.active,maxZoom:t.maxZoom,minZoom:t.minZoom,windowWidth:t.windowWidth,windowHeight:t.windowHeight},on:{scale:t.emitScale,close:t.emitClose}})}))])},genClose:function(){var t=this.$createElement;if(this.closeable)return t(k.a,{attrs:{role:"button",name:this.closeIcon},class:y("close-icon",this.closeIconPosition),on:{click:this.emitClose}})},onClosed:function(){this.$emit("closed")},swipeTo:function(t,e){this.$refs.swipe&&this.$refs.swipe.swipeTo(t,e)}},render:function(){var t=arguments[0];if(this.shouldRender)return t("transition",{attrs:{name:"van-fade"},on:{afterLeave:this.onClosed}},[t("div",{directives:[{name:"show",value:this.value}],class:[y(),this.className]},[this.genClose(),this.genImages(),this.genIndex(),this.genCover()])])}}),A={loop:!0,images:[],value:!0,minZoom:1/3,maxZoom:3,className:"",onClose:null,onChange:null,showIndex:!0,closeable:!1,closeIcon:"clear",asyncClose:!1,startPosition:0,swipeDuration:500,showIndicators:!1,closeOnPopstate:!1,closeIconPosition:"top-right",getContainer:"body"},H=function(t,e){if(void 0===e&&(e=0),!p.f){D||(D=new(m.a.extend(E))({el:document.createElement("div")}),document.body.appendChild(D.$el),D.$on("change",(function(t){D.onChange&&D.onChange(t)})),D.$on("scale",(function(t){D.onScale&&D.onScale(t)})));var i=Array.isArray(t)?{images:t,startPosition:e}:t;return Object(f.a)(D,A,i),D.$once("input",(function(t){D.value=t})),D.$once("closed",(function(){D.images=[]})),i.onClose&&(D.$off("close"),D.$once("close",i.onClose)),D}};H.Component=E,H.install=function(){m.a.use(E)};var W=H,Z=(i("7f7f"),i("6b54"),i("a481"),i("ac6a"),i("28a5"),i("96cf"),i("3b8d")),F=i("d225"),q=i("b0b4"),U=i("4e2b"),V=i("308d"),G=i("6bb5"),J=i("9ab4"),K=i("60a3"),Q=i("2970"),tt=i("3337");function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Object(G.a)(t);if(e){var o=Object(G.a)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return Object(V.a)(this,i)}}var it=function(t){Object(U.a)(n,t);var e,i=et(n);function n(){var t;return Object(F.a)(this,n),(t=i.apply(this,arguments)).topImg="",t.animateClass="",t.nowTime="00:00",t.nowDate="",t}return Object(q.a)(n,[{key:"created",value:function(){var t=JSON.parse(localStorage.getItem("top_pic")+"");this.topImg=t[localStorage.getItem("top_pic-count")||0]}},{key:"mounted",value:(e=Object(Z.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$nextTick();case 2:this.nowTime=this.$utils.dayjs(new Date).format("HH:mm"),this.nowDate=this.$utils.dayjs(new Date).format("dddd, MMMM DD"),(e=this.$refs.lockView).cloneNode().className="lock",this.$commit("setShareEl",e);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tap",value:function(){var t=this;this.animateClass="animate__fadeOutUp",setTimeout((function(){t.$emit("input","start")}),100)}}]),n}(Q.a);Object(J.a)([Object(K.b)(String)],it.prototype,"value",void 0);var nt,ot=it=Object(J.a)([Object(K.a)({components:{}})],it),at=(i("d45f"),i("2877")),st=Object(at.a)(ot,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"lockView",staticClass:"animate__animated lock",class:t.animateClass},[i("van-image",{attrs:{height:"100vh",width:"100vw",fit:"cover",src:t.topImg},scopedSlots:t._u([{key:"loading",fn:function(){return[i("van-loading")]},proxy:!0}])}),i("div",{staticClass:"wrap",on:{click:t.tap}},[i("div",{staticClass:"time"},[t._v(t._s(t.nowTime)+"\n      "),i("div",{staticClass:"sub_date"},[t._v(t._s(t.nowDate))])]),i("div",{staticClass:"a-icon picon_zhiwen"})])],1)}),[],!1,null,"0b77c5b8",null).exports,rt=(i("4917"),function(t){var e=t&&t.match(/\${(\S+)}/g)||[];return{keys:e.map((function(t){return t.replace(/\$|{|}/g,"")})),values:e}});function ct(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return ht(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ht(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,r=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return s=t.done,t},e:function(t){r=!0,a=t},f:function(){try{s||null==i.return||i.return()}finally{if(r)throw a}}}}function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Object(G.a)(t);if(e){var o=Object(G.a)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return Object(V.a)(this,i)}}var lt=function(t){Object(U.a)(s,t);var e,i,n,o,a=ut(s);function s(){var t;return Object(F.a)(this,s),(t=a.apply(this,arguments)).palyerShow=!1,t.sideShow=!1,t.shareShow=!1,t.visiable="",t.imgList={},t.sideList={},t.images=[],t.show=!1,t.index=0,t.details={},t.topImg="",t.orient="?imageMogr2/auto-orient",t.short="?imageMogr2/auto-orient/thumbnail/".concat(tt.d,"x/blur/1x0/quality/95"),t.scrollTop=0,t}return Object(q.a)(s,[{key:"created",value:(o=Object(Z.a)(regeneratorRuntime.mark((function t(){var e,i,n,o,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.$route.params,i=e.albumId,n=e.bucket,t.next=3,this.$ajax.qn.getList({id:i,bucket:n,limit:9999});case 3:o=t.sent,a=o.data,s=o.domain,this.$utils.config.IMG_URL=s,this.$store.commit("setImgsLength",a.length),this.imgList=this.assembly(a),tt.c.allImgList=this.imgList,tt.c.topicImgList=this.assembly(a,"topic"),tt.c.yearImgList=this.assembly(a,"year"),tt.c.monthImgList=this.assembly(a,"month"),this.sideList=tt.c.topicImgList;case 14:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"mounted",value:(n=Object(Z.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$nextTick();case 2:this.topImg=JSON.parse(localStorage.getItem("top_pic")+"")[localStorage.getItem("top_pic-count")||0],window.history.pushState(null,"",document.URL),window.addEventListener("popstate",this.onBrowserBack,!1),setTimeout((function(){e.shareShow=!0,e.sideShow=!0}),100);case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"onBrowserBack",value:function(){var t=this;setTimeout((function(){window.scrollTo(0,t.scrollTop)}),30),window.history.pushState(null,"",document.URL),this.show=!1}},{key:"assembly",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";t=(t=t.filter((function(t){var i=e.parsing(t).dateTime;if(!isNaN(i))return t&&t.trim()}))).map((function(t){var n=e.parsing(t),o=n.params,a=n.dateTime,s=o[o.length-tt.a[i]];return{date:e.$utils.dayjs(a).format("YYYY-MM-DD"),url:e.$utils.config.IMG_URL+t,group:s}}));var n,o=new this.$utils.GroupArray(t),a={},s="time"===i?"date":"group",r=ct(o.groupByKey(s));try{for(r.s();!(n=r.n()).done;){var c=n.value;a[c[0][s]]=c}}catch(t){r.e(t)}finally{r.f()}return a.undefined&&delete a.undefined,this.$utils.GroupArray.sortObj(a)}},{key:"parsing",value:function(t){var e=t?t.split(".")[0].split("/"):[];return e[e.length-1],{params:e,dateTime:+e[e.length-1]}}},{key:"topPreview",value:function(t){var e=this;this.images=tt.c.topicImgList[t].map((function(t){return t.url+e.orient})),this.preview("",0)}},{key:"preview",value:(i=Object(Z.a)(regeneratorRuntime.mark((function t(e,i){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.scrollTop=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,this.visiable="hideSide",e&&(this.images=this.imgList[e].map((function(t){return t.url+n.orient}))),this.index=i,this.show=!0,this.loadEXIF(i);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"previewClose",value:function(){this.visiable="start",this.images=[],this.details=[],this.index=0}},{key:"previewChange",value:function(t){this.loadEXIF(t)}},{key:"loadEXIF",value:(e=Object(Z.a)(regeneratorRuntime.mark((function t(e){var i,n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.images[e]){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.$ajax.qn.getExif(this.images[e].split("?")[0]);case 4:i=t.sent,n=tt.b.map((function(t){var e=Object.assign({},t);return e.val=o.makingEXIF(e,i),e})),this.details=n;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"makingEXIF",value:function(t,e){var i=rt(t.val),n=t.val,o=(n&&i.keys.forEach((function(t,o){try{n=n.toString().replace(i.values[o],e[t].val)}catch(t){n=""}})),this.$utils.dayjs);if("DateTime"===t.key&&e[t.key]&&o(e[t.key].val).isValid())try{e[t.key].val=o(e[t.key].val).format("YYYY-MM-DD hh:mm:ss")}catch(t){}return n?n.replace(" sec.",""):e[t.key]?e[t.key].val:""}},{key:"sideSelect",value:function(t){if(t){var e={};e[t]=this.sideList[t],this.imgList=e}else this.imgList=tt.c.allImgList}},{key:"chooseModel",value:function(t){this.sideList=tt.c["".concat(t,"ImgList")]}},{key:"openPlayer",value:function(){this.palyerShow=!0}},{key:"destroyed",value:function(){window.removeEventListener("popstate",this.onBrowserBack,!1)}},{key:"windowWidth",get:function(){return this.$getters.windowWidth}},{key:"isIOS",get:function(){return this.$utils.isIOS()}}]),s}(Q.a),dt=lt=Object(J.a)([Object(K.a)({components:(nt={},Object(n.a)(nt,W.Component.name,W.Component),Object(n.a)(nt,d.name,d),Object(n.a)(nt,"Lock",st),Object(n.a)(nt,"Side",(function(){return i.e("chunk-849e9e14").then(i.bind(null,"1eea"))})),Object(n.a)(nt,"Player",(function(){return i.e("chunk-0fcb2fc5").then(i.bind(null,"cccf"))})),Object(n.a)(nt,"Share",(function(){return i.e("chunk-5e44584a").then(i.bind(null,"17a4"))})),nt)})],lt),ft=(i("8fc1"),i("d634"),Object(at.a)(dt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visiable,expression:"visiable"}],staticClass:"animate__animated animate__fadeIn"},[n("van-image",{staticClass:"animate__animated animate__bounceIn",attrs:{height:t.windowWidth/1.9,width:"100%",fit:"cover",src:t.topImg}},[n("img",{staticClass:"take_photo",style:"height:"+t.windowWidth/1.9+"px;",attrs:{src:i("8508"),alt:""},on:{click:function(e){return t.topPreview("Top")}}})]),t._l(t.imgList,(function(e,i,o){return n("div",{key:o},[n("van-divider",{attrs:{"content-position":"left"}},[t._v(t._s(i))]),n("div",{staticClass:"box-wrapper"},t._l(e,(function(e,o){return n("van-image",{key:o,staticClass:"box",class:t.isIOS?"spe":"spe spe_f",attrs:{src:e.url+t.short,"lazy-load":""},on:{click:function(e){return t.preview(i,o)}},scopedSlots:t._u([{key:"loading",fn:function(){return[n("van-loading")]},proxy:!0}],null,!0)})})),1)],1)})),n("van-image-preview",{attrs:{loop:!1,images:t.images,"max-zoom":"12","class-name":"image-preview-view","show-index":!0,startPosition:t.index},on:{close:t.previewClose,change:t.previewChange},scopedSlots:t._u([{key:"cover",fn:function(){return[n("div",{staticClass:"pic_detail-wrap flex-layout"},t._l(t.details,(function(e,i){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.val,expression:"detail.val"}],key:i,staticClass:"param flex-layout"},[n("span",{staticClass:"param-title"},[t._v(t._s(e.name)+" :")]),n("span",[t._v(t._s(e.val))])])})),0)]},proxy:!0}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],2),n("lock",{model:{value:t.visiable,callback:function(e){t.visiable=e},expression:"visiable"}}),t.sideShow?n("side",{attrs:{hide:"hideSide"===t.visiable,data:t.sideList},on:{player:t.openPlayer,select:t.sideSelect,choose:t.chooseModel,share:function(e){t.visiable="showShare"}}}):t._e(),t.palyerShow?n("player",{directives:[{name:"show",rawName:"v-show",value:"hideSide"!==t.visiable,expression:"visiable !== 'hideSide'"}]}):t._e(),t.shareShow?n("share",{model:{value:t.visiable,callback:function(e){t.visiable=e},expression:"visiable"}}):t._e()],1)}),[],!1,null,"49b68668",null));e.default=ft.exports},d634:function(t,e,i){"use strict";var n=i("3f92");i.n(n).a}}]);